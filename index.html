<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–æ—è—Ä—Å–∫–∞—è –¥—É–º–∞ –ø—Ä–∏ –ò–≤–∞–Ω–µ –ì—Ä–æ–∑–Ω–æ–º</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
            min-height: 100vh;
            padding: 24px;
            color: white;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #e9d5ff;
            text-align: center;
            margin-bottom: 24px;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .tab-button {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }
        
        .tab-button.active {
            background-color: #9333ea;
            color: white;
            transform: scale(1.05);
        }
        
        .tab-button:not(.active) {
            background-color: #1e293b;
            color: #d8b4fe;
        }
        
        .tab-button:not(.active):hover {
            background-color: #334155;
        }
        
        .tab-content {
            display: none;
            background-color: #1e293b;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .tab-content.active {
            display: block;
        }
        
        h2 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 16px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }
        
        .stat-card {
            padding: 16px;
            border-radius: 8px;
        }
        
        .stat-label {
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .stat-desc {
            font-size: 14px;
        }
        
        .period-card {
            padding: 20px;
            margin-bottom: 16px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .period-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .period-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .period-events {
            color: #e9d5ff;
            font-size: 14px;
            margin-top: 4px;
        }
        
        .period-stats {
            text-align: right;
        }
        
        .period-total {
            font-size: 24px;
            font-weight: bold;
        }
        
        .period-change {
            font-size: 14px;
            font-weight: 600;
        }
        
        .info-box {
            padding: 16px;
            border-radius: 8px;
            margin-top: 24px;
            border: 1px solid;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
        }
        
        thead tr {
            background-color: #581c87;
        }
        
        tbody tr {
            border-bottom: 1px solid #475569;
        }
        
        tbody tr:hover {
            background-color: rgba(255,255,255,0.05);
        }
        
        .progress-bar-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-bar {
            flex: 1;
            background-color: #475569;
            border-radius: 9999px;
            height: 24px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.3s;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        
        .two-col-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ë–æ—è—Ä—Å–∫–∞—è –¥—É–º–∞ –ø—Ä–∏ –ò–≤–∞–Ω–µ –ì—Ä–æ–∑–Ω–æ–º</h1>
        <p class="subtitle">–ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–∞–≤–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π (1505-1584) –ø–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –ê.–õ. –ó–∏–º–∏–Ω–∞</p>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('dynamics')">–î–∏–Ω–∞–º–∏–∫–∞ —Å–æ—Å—Ç–∞–≤–∞</button>
            <button class="tab-button" onclick="showTab('periods')">–ê–Ω–∞–ª–∏–∑ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º</button>
            <button class="tab-button" onclick="showTab('distribution')">–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</button>
            <button class="tab-button" onclick="showTab('families')">–ê–Ω–∞–ª–∏–∑ —Ñ–∞–º–∏–ª–∏–π</button>
        </div>

        <!-- –î–∏–Ω–∞–º–∏–∫–∞ —Å–æ—Å—Ç–∞–≤–∞ -->
        <div id="dynamics" class="tab-content active">
            <h2>–î–∏–Ω–∞–º–∏–∫–∞ —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ –î—É–º—ã (1505-1584)</h2>
            <div class="chart-container">
                <canvas id="dynamicsChart"></canvas>
            </div>
            <div class="stats-grid">
                <div class="stat-card" style="background-color: #581c87;">
                    <div class="stat-label" style="color: #d8b4fe;">–ú–∞–∫—Å–∏–º—É–º</div>
                    <div class="stat-value">51</div>
                    <div class="stat-desc" style="color: #e9d5ff;">1558 –≥–æ–¥ (–ø–∏–∫ —Ä–µ—Ñ–æ—Ä–º)</div>
                </div>
                <div class="stat-card" style="background-color: #7f1d1d;">
                    <div class="stat-label" style="color: #fca5a5;">–ú–∏–Ω–∏–º—É–º</div>
                    <div class="stat-value">18</div>
                    <div class="stat-desc" style="color: #fecaca;">1584 –≥–æ–¥ (–∫–æ–Ω–µ—Ü –æ–ø—Ä–∏—á–Ω–∏–Ω—ã)</div>
                </div>
                <div class="stat-card" style="background-color: #7c2d12;">
                    <div class="stat-label" style="color: #fdba74;">–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∑–∞ –æ–ø—Ä–∏—á–Ω–∏–Ω—É</div>
                    <div class="stat-value">-57%</div>
                    <div class="stat-desc" style="color: #fed7aa;">1564-1584 –≥–æ–¥—ã</div>
                </div>
            </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º -->
        <div id="periods" class="tab-content">
            <h2>–ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ 10-–ª–µ—Ç–Ω–∏–º –ø–µ—Ä–∏–æ–¥–∞–º</h2>
            <div id="periodsContainer"></div>
            <div class="info-box" style="background-color: rgba(30, 58, 138, 0.3); border-color: #3b82f6;">
                <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 12px;">–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:</h3>
                <ul style="list-style: none; color: #bfdbfe; line-height: 1.8;">
                    <li>‚Ä¢ <strong>1505-1514:</strong> –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –ø—Ä–∏ –í–∞—Å–∏–ª–∏–∏ III –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –≤–ª–∞—Å—Ç–∏</li>
                    <li>‚Ä¢ <strong>1515-1524:</strong> –ü–æ–ª–∏—Ç–∏–∫–∞ "—Å–∞–º —Ç—Ä–µ—Ç–µ–π —É –ø–æ—Å—Ç–µ–ª–∏" - –ª–∏—á–Ω–∞—è –≤–ª–∞—Å—Ç—å –≤–µ–ª–∏–∫–æ–≥–æ –∫–Ω—è–∑—è</li>
                    <li>‚Ä¢ <strong>1545-1554:</strong> –í–æ—Å—Å—Ç–∞–Ω–∏–µ 1547 –≥. ‚Üí –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –±–æ—è—Ä—Å–∫–∏–º–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–º–∏ ‚Üí —Ä–µ–∑–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ</li>
                    <li>‚Ä¢ <strong>1555-1564:</strong> –ü–∏–∫ —Ä–µ—Ñ–æ—Ä–º –ê–¥–∞—à–µ–≤–∞, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ</li>
                    <li>‚Ä¢ <strong>1565-1572:</strong> –û–ü–†–ò–ß–ù–ò–ù–ê - –º–∞—Å—Å–æ–≤—ã–µ —Ä–µ–ø—Ä–µ—Å—Å–∏–∏ –ø—Ä–æ—Ç–∏–≤ –±–æ—è—Ä—Å–∫–æ–π –æ–ø–ø–æ–∑–∏—Ü–∏–∏</li>
                    <li>‚Ä¢ <strong>1573-1584:</strong> –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ—Ä—Ä–æ—Ä–∞, –∑–∞–º–µ–Ω–∞ —Å—Ç–∞—Ä–æ–π –∞—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏–∏ –Ω–æ–≤—ã–º–∏ —Ñ–∞–º–∏–ª–∏—è–º–∏</li>
                </ul>
            </div>
        </div>

        <!-- –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ -->
        <div id="distribution" class="tab-content">
            <h2>–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –î—É–º—ã</h2>
            <div class="chart-container">
                <canvas id="distributionChart"></canvas>
            </div>
            <div class="info-box" style="background-color: rgba(88, 28, 135, 0.3); border-color: #a855f7;">
                <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; color: #e9d5ff;">
                    <div>‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (Œº): <strong>28 —á–µ–ª–æ–≤–µ–∫</strong></div>
                    <div>‚Ä¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (œÉ): <strong>14 —á–µ–ª–æ–≤–µ–∫</strong></div>
                    <div>‚Ä¢ –ú–µ–¥–∏–∞–Ω–∞: <strong>24 —á–µ–ª–æ–≤–µ–∫–∞</strong></div>
                    <div>‚Ä¢ –†–∞–∑–º–∞—Ö: <strong>10-51 —á–µ–ª–æ–≤–µ–∫</strong></div>
                </div>
            </div>
            <div class="info-box" style="background-color: rgba(30, 58, 138, 0.3); border-color: #3b82f6; margin-top: 16px;">
                <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</h3>
                <p style="color: #bfdbfe; line-height: 1.6;">
                    –ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–æ—Å—Ç–∞–≤ –î—É–º—ã –≤–∞—Ä—å–∏—Ä–æ–≤–∞–ª—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–º–µ–µ—Ç 
                    –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é –∞—Å–∏–º–º–µ—Ç—Ä–∏—é —Å –≤—ã–±—Ä–æ—Å–∞–º–∏ –≤ –ø–µ—Ä–∏–æ–¥ —Ä–µ—Ñ–æ—Ä–º (1550-1564) –∏ —Ä–µ–∑–∫–∏–º –ø–∞–¥–µ–Ω–∏–µ–º 
                    –≤ –ø–µ—Ä–∏–æ–¥ –æ–ø—Ä–∏—á–Ω–∏–Ω—ã. –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π" —Ä–∞–∑–º–µ—Ä –î—É–º—ã 
                    –æ–∫–æ–ª–æ 25-30 —á–µ–ª–æ–≤–µ–∫, –Ω–æ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–ª–∏ –æ—Ç —ç—Ç–æ–π –Ω–æ—Ä–º—ã.
                </p>
            </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ —Ñ–∞–º–∏–ª–∏–π -->
        <div id="families" class="tab-content">
            <h2>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –ß–∏—Å–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±–æ—è—Ä—Å–∫–∏—Ö —Ñ–∞–º–∏–ª–∏–π</h2>
            <p style="color: #e9d5ff; margin-bottom: 24px;">
                –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ (–ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å: ¬±4.2%)
            </p>
            <table id="familiesTable"></table>
            
            <div class="two-col-grid">
                <div class="info-box" style="background-color: rgba(127, 29, 29, 0.3); border-color: #ef4444;">
                    <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">–ù–∞–∏–±–æ–ª–µ–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ:</h3>
                    <ul style="color: #fecaca; list-style: none; line-height: 1.8;">
                        <li>‚Ä¢ –í–æ—Ä–æ–Ω—Ü–æ–≤—ã: 50% –∫–∞–∑–Ω–µ–Ω–æ (4 –∏–∑ 8)</li>
                        <li>‚Ä¢ –ü—Ä–æ–Ω—Å–∫–∏–µ: 57% –∫–∞–∑–Ω–µ–Ω–æ (4 –∏–∑ 7)</li>
                        <li>‚Ä¢ –®—É–π—Å–∫–∏–µ: 50% –∫–∞–∑–Ω–µ–Ω–æ (3 –∏–∑ 6)</li>
                    </ul>
                </div>
                
                <div class="info-box" style="background-color: rgba(20, 83, 45, 0.3); border-color: #22c55e;">
                    <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">–í—ã–∂–∏–≤—à–∏–µ —Ñ–∞–º–∏–ª–∏–∏:</h3>
                    <ul style="color: #bbf7d0; list-style: none; line-height: 1.8;">
                        <li>‚Ä¢ –ì–æ–¥—É–Ω–æ–≤—ã: 100% –≤—ã–∂–∏–ª–æ (–æ–ø—Ä–∏—á–Ω–∏–∫–∏)</li>
                        <li>‚Ä¢ –†–æ–º–∞–Ω–æ–≤—ã-–Æ—Ä—å–µ–≤—ã: 60% (—Ä–æ–¥—Å—Ç–≤–æ —Å —Ü–∞—Ä–µ–º)</li>
                        <li>‚Ä¢ –ì–ª–∏–Ω—Å–∫–∏–µ: 25% (—Ä–æ–¥—Å—Ç–≤–æ —Å —Ü–∞—Ä–µ–º)</li>
                    </ul>
                </div>
            </div>

            <div class="info-box" style="background-color: rgba(133, 77, 14, 0.3); border-color: #eab308; margin-top: 16px;">
                <h3 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">üìä –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤:</h3>
                <p style="color: #fef08a; font-size: 14px; line-height: 1.6;">
                    –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ —Ä–∞–∑—Ä—è–¥–Ω—ã—Ö –∫–Ω–∏–≥ –∏ —Å–∏–Ω–æ–¥–∏–∫–æ–≤ –ò–≤–∞–Ω–∞ –ì—Ä–æ–∑–Ω–æ–≥–æ. –£—á–∏—Ç—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ 
                    –ª–∏—Ü–∞ —Å –¥—É–º–Ω—ã–º–∏ —á–∏–Ω–∞–º–∏ (–±–æ—è—Ä–µ –∏ –æ–∫–æ–ª—å–Ω–∏—á–∏–µ). –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å ¬±4.2% —Å–≤—è–∑–∞–Ω–∞ —Å –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—å—é 
                    –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ –¥–∞—Ç–∞–º —Å–º–µ—Ä—Ç–∏ –∏ —Å–ø–æ—Ä–Ω—ã–º–∏ —Å–ª—É—á–∞—è–º–∏ –ø–æ—Å—Ç—Ä–∏–∂–µ–Ω–∏—è –≤ –º–æ–Ω–∞—Ö–∏. –í—Å–µ–≥–æ 
                    –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 59 –±–æ—è—Ä—Å–∫–∏—Ö —Ñ–∞–º–∏–ª–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥ 1505-1584 –≥–≥.
                </p>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ
        const dumaData = [
            { year: 1505, boyars: 5, okolnichie: 5, total: 10 },
            { year: 1512, boyars: 9, okolnichie: 15, total: 24 },
            { year: 1520, boyars: 4, okolnichie: 8, total: 12 },
            { year: 1533, boyars: 12, okolnichie: 3, total: 15 },
            { year: 1543, boyars: 12, okolnichie: 3, total: 15 },
            { year: 1550, boyars: 32, okolnichie: 12, total: 44 },
            { year: 1558, boyars: 34, okolnichie: 17, total: 51 },
            { year: 1564, boyars: 33, okolnichie: 9, total: 42 },
            { year: 1572, boyars: 18, okolnichie: 7, total: 25 },
            { year: 1584, boyars: 12, okolnichie: 6, total: 18 }
        ];

        const periodData = [
            { period: '1505-1514', avgTotal: 17, change: '+140%', events: '–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –≤–ª–∞—Å—Ç–∏', isOprichnina: false },
            { period: '1515-1524', avgTotal: 12, change: '-29%', events: '–ü–æ–ª–∏—Ç–∏–∫–∞ "—Å–∞–º —Ç—Ä–µ—Ç–µ–π —É –ø–æ—Å—Ç–µ–ª–∏"', isOprichnina: false },
            { period: '1525-1534', avgTotal: 14, change: '+17%', events: '–ö–æ–Ω–µ—Ü –ø—Ä–∞–≤–ª–µ–Ω–∏—è –í–∞—Å–∏–ª–∏—è III', isOprichnina: false },
            { period: '1535-1544', avgTotal: 14, change: '0%', events: '–ë–æ—è—Ä—Å–∫–æ–µ –ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –º–µ–∂–¥–æ—É—Å–æ–±–∏—Ü—ã', isOprichnina: false },
            { period: '1545-1554', avgTotal: 43, change: '+207%', events: '–í–æ—Å—Å—Ç–∞–Ω–∏–µ 1547 –≥., —Ä–µ—Ñ–æ—Ä–º—ã –ê–¥–∞—à–µ–≤–∞', isOprichnina: false },
            { period: '1555-1564', avgTotal: 47, change: '+9%', events: '–†–∞—Å—Ü–≤–µ—Ç —Ä–µ—Ñ–æ—Ä–º, –Ω–∞—á–∞–ª–æ —Ä–µ–ø—Ä–µ—Å—Å–∏–π', isOprichnina: false },
            { period: '1565-1572', avgTotal: 25, change: '-47%', events: '–û–ü–†–ò–ß–ù–ò–ù–ê - –º–∞—Å—Å–æ–≤—ã–µ –∫–∞–∑–Ω–∏', isOprichnina: true },
            { period: '1573-1584', avgTotal: 18, change: '-28%', events: '–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ—Ä—Ä–æ—Ä–∞', isOprichnina: false }
        ];

        const familyData = [
            { family: '–®—É–π—Å–∫–∏–µ', members: 6, executed: 3, survived: 1, percentage: 16.7 },
            { family: '–í–æ—Ä–æ–Ω—Ü–æ–≤—ã', members: 8, executed: 4, survived: 1, percentage: 12.5 },
            { family: '–ú–æ—Ä–æ–∑–æ–≤—ã', members: 9, executed: 3, survived: 2, percentage: 22.2 },
            { family: '–ì–æ–¥—É–Ω–æ–≤—ã', members: 4, executed: 0, survived: 4, percentage: 100 },
            { family: '–†–æ–º–∞–Ω–æ–≤—ã-–Æ—Ä—å–µ–≤—ã', members: 5, executed: 1, survived: 3, percentage: 60 },
            { family: '–ü—Ä–æ–Ω—Å–∫–∏–µ', members: 7, executed: 4, survived: 1, percentage: 14.3 },
            { family: '–ë—É–ª–≥–∞–∫–æ–≤—ã', members: 6, executed: 2, survived: 1, percentage: 16.7 },
            { family: '–ì–ª–∏–Ω—Å–∫–∏–µ', members: 4, executed: 1, survived: 1, percentage: 25 }
        ];

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // –ì—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏
        const ctx1 = document.getElementById('dynamicsChart').getContext('2d');
        new Chart(ctx1, {
            type: 'line',
            data: {
                labels: dumaData.map(d => d.year),
                datasets: [
                    {
                        label: '–ë–æ—è—Ä–µ',
                        data: dumaData.map(d => d.boyars),
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.3)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '–û–∫–æ–ª—å–Ω–∏—á–∏–µ',
                        data: dumaData.map(d => d.okolnichie),
                        borderColor: '#ec4899',
                        backgroundColor: 'rgba(236, 72, 153, 0.3)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '–í—Å–µ–≥–æ',
                        data: dumaData.map(d => d.total),
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 3,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: 'white', font: { size: 14 } } }
                },
                scales: {
                    y: { 
                        beginAtZero: true,
                        ticks: { color: 'white' },
                        grid: { color: 'rgba(255,255,255,0.1)' }
                    },
                    x: { 
                        ticks: { color: 'white' },
                        grid: { color: 'rgba(255,255,255,0.1)' }
                    }
                }
            }
        });

        // –ì—Ä–∞—Ñ–∏–∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
        function generateNormalDistribution() {
            const data = [];
            const mean = 28;
            const stdDev = 14;
            
            for (let x = 0; x <= 60; x += 2) {
                const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                          Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2)) * 500;
                data.push({ x, y });
            }
            return data;
        }

        const normalDist = generateNormalDistribution();
        const ctx2 = document.getElementById('distributionChart').getContext('2d');
        new Chart(ctx2, {
            type: 'line',
            data: {
                labels: normalDist.map(d => d.x),
                datasets: [
                    {
                        label: '–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
                        data: normalDist.map(d => d.y),
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ',
                        data: dumaData.map(d => d.total),
                        borderColor: '#ec4899',
                        backgroundColor: '#ec4899',
                        borderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        showLine: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: 'white', font: { size: 14 } } }
                },
                scales: {
                    y: { 
                        ticks: { color: 'white' },
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        title: { display: true, text: '–†–∞–∑–º–µ—Ä –î—É–º—ã', color: 'white' }
                    },
                    x: { 
                        ticks: { color: 'white' },
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        title: { display: true, text: '–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏', color: 'white' }
                    }
                }
            }
        });

        // –†–µ–Ω–¥–µ—Ä –ø–µ—Ä–∏–æ–¥–æ–≤
        const periodsContainer = document.getElementById('periodsContainer');
        periodData.forEach(period => {
            const card = document.createElement('div');
            card.className = 'period-card';
            card.style.borderColor = period.isOprichnina ? '#ef4444' : '#a855f7';
            card.style.backgroundColor = period.isOprichnina ? 'rgba(127, 29, 29, 0.3)' : '#334155';
            
            card.innerHTML = `
                <div class="period-header">
                    <div>
                        <div class="period-title">${period.period}</div>
                        <div class="period-events">${period.events}</div>
                    </div>
                    <div class="period-stats">
                        <div class="period-total">${period.avgTotal}</div>
                        <div class="period-change" style="color: ${period.change.includes('+') ? '#4ade80' : '#f87171'}">
                            ${period.change}
                        </div>
                    </div>
                </div>
                ${period.isOprichnina ? `
                    <div style="margin-top: 12px; padding: 12px; background-color: rgba(127, 29, 29, 0.5); border-radius: 4px;">
                        <p style="color: #fecaca; font-size: 14px; font-weight: 600;">
                            ‚ö†Ô∏è –û–ü–†–ò–ß–ù–ò–ù–ê: –ò–∑ 33 –±–æ—è—Ä –∫–∞–∑–Ω–µ–Ω–æ 15, 3 –ø–æ—Å—Ç—Ä–∏–∂–µ–Ω—ã –≤ –º–æ–Ω–∞—Ö–∏. 
                            –ò–∑ 9 –æ–∫–æ–ª—å–Ω–∏—á–∏—Ö –∫–∞–∑–Ω–µ–Ω–æ 4. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –≤ 1.7 —Ä–∞–∑–∞.
                        </p>
                    </div>
                ` : ''}
            `;
            periodsContainer.appendChild(card);
        });

        // –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã —Ñ–∞–º–∏–ª–∏–π
        const familiesTable = document.getElementById('familiesTable');
        let tableHTML = `
            <thead>
                <tr>
                    <th>–§–∞–º–∏–ª–∏—è</th>
                    <th>–ß–ª–µ–Ω–æ–≤ –≤ –î—É–º–µ</th>
                    <th>–ö–∞–∑–Ω–µ–Ω–æ</th>
                    <th>–í—ã–∂–∏–ª–æ</th>
                    <th>% –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏</th>
                </tr>
            </thead>
            <tbody>
        `;
        
        familyData.forEach(family => {
            tableHTML += `
                <tr>
                    <td style="font-weight: 600;">${family.family}</td>
                    <td style="color: #e9d5ff;">${family.members}</td>
                    <td style="color: #f87171; font-weight: bold;">${family.executed}</td>
                    <td style="color: #4ade80; font-weight: bold;">${family.survived}</td>
                    <td>
                        <div class="progress-bar-container">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${family.percentage}%; background-color: ${family.percentage > 50 ? '#22c55e' : '#ef4444'};"></div>
                            </div>
                            <span style="font-weight: bold; color: ${family.percentage > 50 ? '#4ade80' : '#f87171'}; min-width: 50px;">
                                ${family.percentage}%
                            </span>
                        </div>
                    </td>
                </tr>
            `;
        });
        
        tableHTML += '</tbody>';
        familiesTable.innerHTML = tableHTML;
    </script>
</body>

</html>
